
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rove Inspection Review</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #121212;
            --bg-card: #1E1E1E;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --severe: #ff4d4d;
            --moderate: #ff9f43;
            --minor: #feca57;
            --success: #2ecc71;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            padding-bottom: 100px;
        }

        .navbar {
            padding: 20px 40px;
            background: rgba(18, 18, 18, 0.95);
            border-bottom: 1px solid #333;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo { font-size: 1.5rem; letter-spacing: 4px; text-transform: uppercase; }
        
        .status-bar {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 40px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .card.approved { border-color: var(--success); opacity: 0.5; pointer-events: none; }
        .card.rejected { opacity: 0.2; pointer-events: none; filter: grayscale(100%); }

        .card-image-wrapper {
            position: relative;
            width: 100%;
            padding-top: 66.66%;
            background: #000;
            cursor: pointer;
        }

        .card-image {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover;
        }

        .severity-badge {
            position: absolute;
            top: 15px; left: 15px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            z-index: 2;
        }
        .severity-badge.severe { background: var(--severe); color: white; }
        .severity-badge.moderate { background: var(--moderate); color: white; }
        .severity-badge.minor { background: var(--minor); color: black; }

        .card-content { padding: 20px; flex-grow: 1; }
        .card-title { font-size: 1.1rem; font-weight: 500; margin-bottom: 8px; }
        .card-desc { font-size: 0.9rem; color: #ccc; margin-top: 10px; line-height: 1.5; }

        /* Action Buttons */
        .action-bar {
            display: flex;
            border-top: 1px solid #333;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background 0.2s;
            color: white;
        }

        .btn-reject { background: #2a2a2a; color: #ff4d4d; }
        .btn-reject:hover { background: #3a1a1a; }

        .btn-approve { background: #2a2a2a; color: #2ecc71; border-left: 1px solid #333; }
        .btn-approve:hover { background: #1a3a2a; }

    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo">ROVE REVIEW</div>
        <div class="status-bar">Server Status: <span id="server-status">Checking...</span></div>
    </nav>

    <div class="container">
        <div class="grid">
    
            <div class="card" id="card-0">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 3 Inspection/- Internet location system provider access points.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Internet location system provider access points</div>
                    <div class="card-desc">The internet location system provider access points show clear signs of significant physical damage, including paint/debris splatters, scuffs, and impact marks on their surfaces, indicating mishandling or exposure to a harsh environment.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-0', 'reject', '8 Barnes Avenue Nov 3 Inspection', '- Internet location system provider access points.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-0', 'approve', '8 Barnes Avenue Nov 3 Inspection', '- Internet location system provider access points.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-1">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 3 Inspection/- battery door locks lock handles.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">battery door locks lock handles</div>
                    <div class="card-desc">There are white stains on the lock around the keyhole and below the keypad. There are also scratches on the edges of the keypad frame.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-1', 'reject', '8 Barnes Avenue Nov 3 Inspection', '- battery door locks lock handles.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-1', 'approve', '8 Barnes Avenue Nov 3 Inspection', '- battery door locks lock handles.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-2">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Dec 1 Inspection/- Internet location system provider access points.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Internet location system provider access points</div>
                    <div class="card-desc">One of the Internet location system provider access points, specifically the black box on the back, shows significant physical damage. There are visible white, crusty stains or residue extensively covering its sides, suggesting either severe exposure to an damaging substance that has hardened on its surface or significant material degradation/damage.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-2', 'reject', '8 Barnes Avenue Dec 1 Inspection', '- Internet location system provider access points.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-2', 'approve', '8 Barnes Avenue Dec 1 Inspection', '- Internet location system provider access points.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-3">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 3 Clean/Confirm if the Pool is clean.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Confirm if the Pool is clean</div>
                    <div class="card-desc">The pool cover shows tearing and structural issues, especially visible on the left side, indicating physical damage.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-3', 'reject', '8 Barnes Avenue Nov 3 Clean', 'Confirm if the Pool is clean.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-3', 'approve', '8 Barnes Avenue Nov 3 Clean', 'Confirm if the Pool is clean.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-4">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 3 Clean/If applicable  take a photo of the pool 1.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">If applicable  take a photo of the pool</div>
                    <div class="card-desc">The pool cover is torn and appears to be damaged in multiple areas, causing debris and water to collect on the cover.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-4', 'reject', '8 Barnes Avenue Nov 3 Clean', 'If applicable  take a photo of the pool 1.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-4', 'approve', '8 Barnes Avenue Nov 3 Clean', 'If applicable  take a photo of the pool 1.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-5">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 3 Clean/Take a photo of the entire Room 1 (3).jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take a photo of the entire Room 1</div>
                    <div class="card-desc">Baseboard trim on the lower left of the room appears to have a gap where it meets the other baseboard.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-5', 'reject', '8 Barnes Avenue Nov 3 Clean', 'Take a photo of the entire Room 1 (3).jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-5', 'approve', '8 Barnes Avenue Nov 3 Clean', 'Take a photo of the entire Room 1 (3).jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-6">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 3 Clean/Take photo of the Wardrobe (2).jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take photo of the Wardrobe</div>
                    <div class="card-desc">There is a crack in the bottom right corner of the wardrobe.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-6', 'reject', '8 Barnes Avenue Nov 3 Clean', 'Take photo of the Wardrobe (2).jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-6', 'approve', '8 Barnes Avenue Nov 3 Clean', 'Take photo of the Wardrobe (2).jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-7">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 3 Clean/Take photo of the Wardrobe 2.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take photo of the Wardrobe</div>
                    <div class="card-desc">One of the wardrobe doors is detached and leaning against the main unit.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-7', 'reject', '8 Barnes Avenue Nov 3 Clean', 'Take photo of the Wardrobe 2.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-7', 'approve', '8 Barnes Avenue Nov 3 Clean', 'Take photo of the Wardrobe 2.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-8">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/5 TP units per bathroom 1.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">5 TP units per bathroom</div>
                    <div class="card-desc">There are only 4 TP units provided, not the requested 5 units.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-8', 'reject', '8 Barnes Avenue Nov 30 Clean', '5 TP units per bathroom 1.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-8', 'approve', '8 Barnes Avenue Nov 30 Clean', '5 TP units per bathroom 1.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-9">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Advise if all the Outdoor Lighting is operational if No take a photo of the ones are not operational.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Advise if all the Outdoor Lighting is operational if No take a photo of the ones are not operational</div>
                    <div class="card-desc">A small chip is observed on one of the patio tiles, indicating physical damage.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-9', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Advise if all the Outdoor Lighting is operational if No take a photo of the ones are not operational.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-9', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Advise if all the Outdoor Lighting is operational if No take a photo of the ones are not operational.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-10">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Clean Filter of washerdryer lint trapsReference.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Clean Filter of washerdryer lint trapsReference</div>
                    <div class="card-desc">The lint trap has a broken plastic piece on the frame.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-10', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Clean Filter of washerdryer lint trapsReference.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-10', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Clean Filter of washerdryer lint trapsReference.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-11">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/If applicable take a photo of the poolReference.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">If applicable take a photo of the poolReference</div>
                    <div class="card-desc">The pool cover is torn and appears to be partially submerged. The pool deck has some cracked tiles. One of the pool refference appears to be bent or broken.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-11', 'reject', '8 Barnes Avenue Nov 30 Clean', 'If applicable take a photo of the poolReference.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-11', 'approve', '8 Barnes Avenue Nov 30 Clean', 'If applicable take a photo of the poolReference.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-12">
                <div class="card-image-wrapper">
                    <div class="severity-badge minor">minor</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Take a photo of the Toilet paperReference (5).jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take a photo of the Toilet paperReference</div>
                    <div class="card-desc">Portion of the wall, where toilet paper reference points at it, has some deformations/bubbles from what appears to be water damage.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-12', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the Toilet paperReference (5).jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-12', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the Toilet paperReference (5).jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-13">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Take a photo of the Workstation Please ensure Monitor is on and in working orderReference (6).jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take a photo of the Workstation Please ensure Monitor is on and in working orderReference</div>
                    <div class="card-desc">Exposed wiring is visible in two wall outlets, indicating missing cover plates which constitutes a missing part and potential hazard.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-13', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the Workstation Please ensure Monitor is on and in working orderReference (6).jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-13', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the Workstation Please ensure Monitor is on and in working orderReference (6).jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-14">
                <div class="card-image-wrapper">
                    <div class="severity-badge severe">severe</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Take a photo of the entire RoomReference 1 (3).jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take a photo of the entire RoomReference 1</div>
                    <div class="card-desc">Exposed electrical wiring and outlet on the wall next to the TV stand.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-14', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the entire RoomReference 1 (3).jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-14', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Take a photo of the entire RoomReference 1 (3).jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
            <div class="card" id="card-15">
                <div class="card-image-wrapper">
                    <div class="severity-badge moderate">moderate</div>
                    <img src="../8 Barnes Avenue Nov 30 Clean/Take photo of the dishwasher 2.jpg" class="card-image">
                </div>
                <div class="card-content">
                    <div class="card-title">Take photo of the dishwasher</div>
                    <div class="card-desc">The middle rack of the dishwasher appears to be damaged, with a portion of the grid bent inwards, indicating a structural compromise.</div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-reject" onclick="handleReview('card-15', 'reject', '8 Barnes Avenue Nov 30 Clean', 'Take photo of the dishwasher 2.jpg')">âœ• Discard</button>
                    <button class="btn btn-approve" onclick="handleReview('card-15', 'approve', '8 Barnes Avenue Nov 30 Clean', 'Take photo of the dishwasher 2.jpg')">âœ“ Confirm</button>
                </div>
            </div>
        
        </div>
    </div>

    <script>
        // Check if server is running
        fetch('/status')
            .then(r => {
                document.getElementById('server-status').innerText = "ðŸŸ¢ Connected";
                document.getElementById('server-status').style.color = "#2ecc71";
            })
            .catch(e => {
                document.getElementById('server-status').innerText = "ðŸ”´ Not Connected (Run review_server.py)";
                document.getElementById('server-status').style.color = "#ff4d4d";
            });

        function handleReview(cardId, action, folder, filename) {
            const card = document.getElementById(cardId);
            
            // Optimistic UI update
            if (action === 'approve') {
                card.classList.add('approved');
            } else {
                card.classList.add('rejected');
                setTimeout(() => card.style.display = 'none', 500); // Hide after animation
            }

            // Send to server
            fetch('/review', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    action: action,
                    folder: folder,
                    filename: filename
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Server response:', data);
                if(data.status === 'error') {
                    alert('Error saving file: ' + data.message);
                    card.classList.remove('approved'); // Revert on error
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Only alert if we expected a connection
                if(document.getElementById('server-status').innerText.includes("Connected")) {
                    alert("Failed to communicate with server.");
                }
            });
        }
    </script>
</body>
</html>
    